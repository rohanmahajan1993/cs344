It is supper annoying about we have to malloc all of these device variables.
